# Linux.do å…³é”®è¯ç›‘æ§æœºå™¨äºº

ç›‘æ§ [Linux.do](https://linux.do) è®ºå›ï¼Œå½“æ–°å¸–å­æ ‡é¢˜åŒ¹é…è®¢é˜…å…³é”®è¯æ—¶ï¼Œé€šè¿‡ Telegram Bot æ¨é€é€šçŸ¥ã€‚

---

# ä½¿ç”¨æŒ‡å—

> å¦‚æœä½ åªæ˜¯æƒ³ä½¿ç”¨è¿™ä¸ªæœºå™¨äººï¼Œä¸éœ€è¦è‡ªå·±éƒ¨ç½²ï¼Œç›´æ¥çœ‹è¿™éƒ¨åˆ†å³å¯ã€‚

## å¿«é€Ÿå¼€å§‹

1. åœ¨ Telegram æœç´¢ [@Linuxdo_keyword_bot](https://t.me/Linuxdo_keyword_bot)
2. ç‚¹å‡» **Start** æˆ–å‘é€ `/start`
3. è®¢é˜…ä½ æ„Ÿå…´è¶£çš„å…³é”®è¯ï¼Œä¾‹å¦‚ï¼š`/subscribe docker`

å°±è¿™ä¹ˆç®€å•ï¼å½“ Linux.do æœ‰æ–°å¸–å­æ ‡é¢˜åŒ…å«ä½ è®¢é˜…çš„å…³é”®è¯æ—¶ï¼Œæœºå™¨äººä¼šè‡ªåŠ¨æ¨é€é€šçŸ¥ç»™ä½ ã€‚

## å‘½ä»¤åˆ—è¡¨

| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `/start` | å¼€å§‹ä½¿ç”¨ | `/start` |
| `/subscribe <å…³é”®è¯>` | è®¢é˜…å…³é”®è¯ | `/subscribe docker` |
| `/unsubscribe <å…³é”®è¯>` | å–æ¶ˆè®¢é˜… | `/unsubscribe docker` |
| `/list` | æŸ¥çœ‹æˆ‘çš„å…³é”®è¯è®¢é˜… | `/list` |
| `/subscribe_user <ç”¨æˆ·å>` | è®¢é˜…æŸç”¨æˆ·çš„æ‰€æœ‰å¸–å­ | `/subscribe_user neo` |
| `/unsubscribe_user <ç”¨æˆ·å>` | å–æ¶ˆè®¢é˜…ç”¨æˆ· | `/unsubscribe_user neo` |
| `/list_users` | æŸ¥çœ‹å·²è®¢é˜…çš„ç”¨æˆ· | `/list_users` |
| `/subscribe_all` | è®¢é˜…æ‰€æœ‰æ–°å¸–ï¼ˆæ…ç”¨ï¼Œæ¶ˆæ¯é‡å¤§ï¼‰ | `/subscribe_all` |
| `/unsubscribe_all` | å–æ¶ˆè®¢é˜…æ‰€æœ‰ | `/unsubscribe_all` |
| `/stats` | æŸ¥çœ‹å…³é”®è¯çƒ­åº¦ç»Ÿè®¡ | `/stats` |
| `/help` | å¸®åŠ©ä¿¡æ¯ | `/help` |

## ä½¿ç”¨ç¤ºä¾‹

```
# è®¢é˜…å¤šä¸ªå…³é”®è¯
/subscribe docker
/subscribe NAS
/subscribe æ±‚åŠ©
/subscribe homelab

# è®¢é˜…æŸä¸ªç”¨æˆ·çš„æ‰€æœ‰å¸–å­
/subscribe_user neo

# æŸ¥çœ‹å½“å‰è®¢é˜…
/list
/list_users

# å–æ¶ˆæŸä¸ªè®¢é˜…
/unsubscribe docker
/unsubscribe_user neo

# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
/stats
```

## æ¨é€æ•ˆæœ

å½“æœ‰åŒ¹é…çš„æ–°å¸–å­æ—¶ï¼Œä½ ä¼šæ”¶åˆ°è¿™æ ·çš„æ¶ˆæ¯ï¼š

```
ğŸ”” Linux.do æ–°å¸–æé†’
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Œ åŒ¹é…å…³é”®è¯ï¼šdocker

ğŸ“ æ ‡é¢˜
Docker å®¹å™¨éƒ¨ç½²æœ€ä½³å®è·µåˆ†äº«

ğŸ”— ç‚¹å‡»æŸ¥çœ‹åŸå¸– â†’
```

## å¸¸è§é—®é¢˜

**Q: å…³é”®è¯åŒºåˆ†å¤§å°å†™å—ï¼Ÿ**
A: ä¸åŒºåˆ†ã€‚è®¢é˜… `Docker` å’Œ `docker` æ•ˆæœç›¸åŒã€‚

**Q: å¯ä»¥è®¢é˜…å¤šå°‘ä¸ªå…³é”®è¯ï¼Ÿ**
A: æ¯ä½ç”¨æˆ·æœ€å¤šå¯è®¢é˜… 5 ä¸ªå…³é”®è¯å’Œ 5 ä¸ªç”¨æˆ·ã€‚å¦‚éœ€æ›´å¤šï¼Œå¯ä½¿ç”¨ `/subscribe_all` è®¢é˜…æ‰€æœ‰å¸–å­ã€‚

**Q: å¯ä»¥è®¢é˜…æŸä¸ªç”¨æˆ·çš„å¸–å­å—ï¼Ÿ**
A: å¯ä»¥ï¼ä½¿ç”¨ `/subscribe_user <ç”¨æˆ·å>` è®¢é˜…æŸä¸ªç”¨æˆ·çš„æ‰€æœ‰å¸–å­ã€‚

**Q: ä¸ºä»€ä¹ˆæ²¡æ”¶åˆ°é€šçŸ¥ï¼Ÿ**
A: å¯èƒ½æ˜¯å¸–å­æ ‡é¢˜æ²¡æœ‰åŒ…å«ä½ çš„å…³é”®è¯ï¼Œæˆ–è€…è¯¥å¸–å­å·²ç»æ¨é€è¿‡äº†ï¼ˆä¸ä¼šé‡å¤æ¨é€ï¼‰ã€‚

**Q: `/subscribe_all` æ˜¯ä»€ä¹ˆï¼Ÿ**
A: è®¢é˜…æ‰€æœ‰æ–°å¸–å­ï¼Œä¸ç®¡æ ‡é¢˜æ˜¯ä»€ä¹ˆéƒ½ä¼šæ¨é€ã€‚æ¶ˆæ¯é‡è¾ƒå¤§ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚

---

# å¼€å‘éƒ¨ç½²æŒ‡å—

> ä»¥ä¸‹å†…å®¹é¢å‘æƒ³è¦è‡ªå·±éƒ¨ç½²æœºå™¨äººçš„å¼€å‘è€…ã€‚

## åŠŸèƒ½ç‰¹æ€§

- æ”¯æŒ RSS å’Œ Discourse API ä¸¤ç§æ•°æ®æº
- å¤šç”¨æˆ·è®¢é˜…ä¸åŒå…³é”®è¯
- æ”¯æŒè®¢é˜…ç‰¹å®šç”¨æˆ·çš„æ‰€æœ‰å¸–å­
- æ”¯æŒè®¢é˜…æ‰€æœ‰æ–°å¸–å­
- å…³é”®è¯åŒ¹é…ä¸åŒºåˆ†å¤§å°å†™
- é˜²æ­¢é‡å¤æ¨é€
- Web é…ç½®ç®¡ç†é¡µé¢ï¼ˆæ”¯æŒåˆ·æ–°ç¼“å­˜ï¼‰
- Cookie å¤±æ•ˆè‡ªåŠ¨é™çº§ + ç®¡ç†å‘˜å‘Šè­¦
- å…³é”®è¯çƒ­åº¦ç»Ÿè®¡

## å®‰è£…
ä»æºç å®‰è£…ï¼š

```bash
git clone https://github.com/zhuxian89/linux-do-keyword-monitor.git
cd linux-do-keyword-monitor
pip install -e .
```

## éƒ¨ç½²æ­¥éª¤

### 1. åˆ›å»º Telegram Bot

1. åœ¨ Telegram æœç´¢ [@BotFather](https://t.me/BotFather)
2. å‘é€ `/newbot` åˆ›å»ºæ–°æœºå™¨äºº
3. æŒ‰æç¤ºè®¾ç½®æœºå™¨äººåç§°å’Œç”¨æˆ·å
4. ä¿å­˜è·å¾—çš„ Bot Tokenï¼ˆæ ¼å¼å¦‚ï¼š`123456789:ABCdefGHIjklMNOpqrsTUVwxyz`ï¼‰

### 2. åˆå§‹åŒ–é…ç½®

```bash
# åˆ›å»ºå·¥ä½œç›®å½•
mkdir -p ~/linux-do-monitor && cd ~/linux-do-monitor

# äº¤äº’å¼é…ç½®
linux-do-monitor init
```

æŒ‰æç¤ºè¾“å…¥ï¼š
- **Bot Token**: ä» BotFather è·å–çš„ Token
- **æ•°æ®æºç±»å‹**: RSSï¼ˆå…¬å¼€ï¼‰æˆ– Discourse APIï¼ˆéœ€è¦ Cookieï¼‰
- **æ‹‰å–é—´éš”**: é»˜è®¤ 60 ç§’

### 3. å¯åŠ¨æœåŠ¡

```bash
linux-do-monitor run
```

å¯åŠ¨åä¼šæ˜¾ç¤º Web é…ç½®é¡µé¢åœ°å€ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç®¡ç†é…ç½®ã€‚

### 4. åå°è¿è¡Œ

ä½¿ç”¨ systemdï¼ˆæ¨èï¼‰ï¼š

```bash
sudo tee /etc/systemd/system/linux-do-monitor.service << EOF
[Unit]
Description=Linux.do Keyword Monitor
After=network.target

[Service]
Type=simple
User=$USER
WorkingDirectory=$HOME/linux-do-monitor
ExecStart=$(which linux-do-monitor) run
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

sudo systemctl daemon-reload
sudo systemctl enable linux-do-monitor
sudo systemctl start linux-do-monitor

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u linux-do-monitor -f
```

æˆ–ä½¿ç”¨ Dockerï¼š

```bash
# TODO: Docker éƒ¨ç½²æ–¹å¼
```

## CLI å‘½ä»¤

```bash
linux-do-monitor --help      # æŸ¥çœ‹å¸®åŠ©
linux-do-monitor version     # æŸ¥çœ‹ç‰ˆæœ¬
linux-do-monitor init        # åˆå§‹åŒ–é…ç½®
linux-do-monitor config      # æŸ¥çœ‹å½“å‰é…ç½®
linux-do-monitor run         # å¯åŠ¨æœåŠ¡
```

## é…ç½®æ–‡ä»¶

è¿è¡Œåä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆï¼š

- `config.json` - é…ç½®æ–‡ä»¶
- `data.db` - SQLite æ•°æ®åº“

é…ç½®ç¤ºä¾‹ï¼š

```json
{
  "bot_token": "your_bot_token",
  "admin_chat_id": 123456789,
  "source_type": "discourse",
  "rss_url": "https://linux.do/latest.rss",
  "discourse_url": "https://linux.do",
  "discourse_cookie": "your_cookie_here",
  "fetch_interval": 60
}
```

## Web ç®¡ç†é¡µé¢

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—® `http://localhost:8080?pwd=yourpassword` å¯ä»¥ï¼š

- åˆ‡æ¢æ•°æ®æºï¼ˆRSS / Discourse APIï¼‰
- æ›´æ–° Cookie
- è®¾ç½®ç®¡ç†å‘˜ Chat IDï¼ˆæ¥æ”¶ç³»ç»Ÿå‘Šè­¦ï¼‰
- æŸ¥çœ‹ç”¨æˆ·ç»Ÿè®¡
- åˆ·æ–°ç¼“å­˜ï¼ˆæ¸…é™¤æ‰€æœ‰ç¼“å­˜æ•°æ®ï¼‰

## æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Linux.do RSS   â”‚â”€â”€â”€â”€â–¶â”‚   Monitor    â”‚â”€â”€â”€â”€â–¶â”‚  Telegram   â”‚
â”‚  / Discourse    â”‚     â”‚   Service    â”‚     â”‚    Bot      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   SQLite     â”‚
                        â”‚   Database   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **æ•°æ®æº**: RSSï¼ˆå…¬å¼€ï¼‰æˆ– Discourse JSON APIï¼ˆéœ€è¦ Cookieï¼Œå¯è®¿é—®æ›´å¤šå†…å®¹ï¼‰
- **è°ƒåº¦å™¨**: APScheduler å®šæ—¶æ‹‰å–
- **Bot æ¡†æ¶**: python-telegram-bot
- **æ•°æ®åº“**: SQLite
- **HTTP å®¢æˆ·ç«¯**: curl_cffiï¼ˆç»•è¿‡ Cloudflareï¼‰

## TODO

### çŸ­æœŸä¼˜åŒ–ï¼ˆæå‡ä½“éªŒï¼‰

- [x] è®¢é˜…ç”¨æˆ· - è®¢é˜…æŸä¸ªç”¨æˆ·çš„æ‰€æœ‰å¸–å­
- [x] å…³é”®è¯çƒ­åº¦ç»Ÿè®¡ - `/stats` å‘½ä»¤æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
- [x] åˆ·æ–°ç¼“å­˜ - Web é¡µé¢æ”¯æŒæ‰‹åŠ¨åˆ·æ–°ç¼“å­˜
- [ ] é™é»˜æ—¶æ®µ - ç”¨æˆ·å¯è®¾ç½®å¤œé—´ä¸æ¨é€ï¼ˆå¦‚ 23:00-8:00ï¼‰
- [ ] æ¶ˆæ¯åˆå¹¶ - çŸ­æ—¶é—´å†…å¤šæ¡é€šçŸ¥åˆå¹¶æˆä¸€æ¡ï¼Œå‡å°‘æ‰“æ‰°
- [ ] æ­£åˆ™åŒ¹é… - æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼è®¢é˜…ï¼Œå¦‚ `docker.*éƒ¨ç½²`
- [ ] åˆ†ç±»è®¢é˜… - æŒ‰ Linux.do çš„åˆ†ç±»ï¼ˆå¦‚"å¼€å‘è°ƒä¼˜"ã€"èµ„æºèŸèƒ"ï¼‰è®¢é˜…

### ä¸­æœŸä¼˜åŒ–ï¼ˆæå‡ç¨³å®šæ€§ï¼‰

- [ ] æ¶ˆæ¯é˜Ÿåˆ— - å¼•å…¥ Redis é˜Ÿåˆ—ï¼Œè§£è€¦æ‹‰å–å’Œå‘é€
- [ ] å¤±è´¥é‡è¯• - å‘é€å¤±è´¥çš„æ¶ˆæ¯è¿›å…¥é‡è¯•é˜Ÿåˆ—
- [ ] å¥åº·æ£€æŸ¥ - `/health` ç«¯ç‚¹ï¼Œæ–¹ä¾¿ç›‘æ§
- [ ] æ•°æ®æ¸…ç† - å®šæœŸæ¸…ç†è¿‡æœŸçš„ posts å’Œ notifications è¡¨
- [ ] å¤šå®ä¾‹éƒ¨ç½² - æ”¯æŒå¤šå®ä¾‹è´Ÿè½½å‡è¡¡
- [ ] Docker éƒ¨ç½² - æä¾› Dockerfile å’Œ docker-compose

### é•¿æœŸæ‰©å±•ï¼ˆæ–°åŠŸèƒ½ï¼‰

- [ ] å†…å®¹æ‘˜è¦ - æ¨é€æ—¶é™„å¸¦å¸–å­æ‘˜è¦
- [ ] AI æ™ºèƒ½æ¨è - æ ¹æ®ç”¨æˆ·å†å²ç‚¹å‡»æ¨èå…³é”®è¯
- [ ] å¤šå¹³å°æ”¯æŒ - æ”¯æŒå…¶ä»– Discourse è®ºå›
- [ ] Web è®¢é˜…ç®¡ç† - ç”¨æˆ·é€šè¿‡ç½‘é¡µç®¡ç†è®¢é˜…ï¼Œä¸åªæ˜¯ Bot

## License

MIT
